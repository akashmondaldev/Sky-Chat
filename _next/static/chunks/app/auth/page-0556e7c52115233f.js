(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{94872:function(e,t,n){Promise.resolve().then(n.bind(n,67429))},56970:function(e,t,n){"use strict";n.d(t,{HC:function(){return s.ListItem},Q:function(){return s.MenuHandler},XZ:function(){return s.Checkbox},ZT:function(){return s.Typography},qy:function(){return s.MenuList},sN:function(){return s.MenuItem},u1:function(){return s.ListItemPrefix},v2:function(){return s.Menu}});var s=n(46095)},67429:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s=n(9268),a=n(86006),i=n(19700),r=n(48136),l=n(68919),o=n(56008),c=n(89791),u=e=>{let{label:t,id:n,type:a,register:i,require:r,errors:l,disabled:o}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-md leading-6 text-gray-900 font-semibold",htmlFor:n,children:t}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{id:n,type:a,autoComplete:n,disabled:o,...i(n,{required:!0}),className:(0,c.Z)("\n                     form-input\n                     block\n                     w-full\n                     rounded-md\n                     border-0\n                     py-1.5\n                     text-gray-900\n                     shadow-sm\n                     ring-1\n                     ring-gray-300\n                     placeholder:text-gray-400\n                     focus:ring-2\n                     focus:ring-inset\n                     focus:ring-sky-600\n                     sm:text-sm\n                     sm:leading-6\n                    ",l[n]&&"focus:ring-rose-500",o&&" opacity-50 cursor-default")})})]})},d=n(19260),m=e=>{let{icon:t,onClick:n}=e;return(0,s.jsx)("button",{type:"button",onClick:n,className:"   inline-flex   w-full justify-center rounded-md   bg-white px-4 py-2 text-gray-500   hover:bg-gray-50 focus:outline-offset-0   shadow-sm ring-1 ring-inset ring-gray-300",children:(0,s.jsx)(t,{})})},f=n(56970),g=n(24734),h=n(33134),p=n(5109),x=n(16160),b=n(84234),y=n(6823);let v=async e=>(0,g.e5)(h.lX,e.email,e.password).then(e=>{var t=e.user;let n={...p.R,name:t.displayName,email:t.email,emailVerified:t.emailVerified,image:t.photoURL,id:t.uid};return(0,b.D0)(n.id),{message:"Success",status:200}}).catch(e=>({message:e.code,status:400})),j=async e=>(0,g.Xb)(h.lX,e.email,e.password).then(t=>{var n=t.user;return((0,b.D0)(n.uid),void 0!==e.avatar)?((0,y.z)(e.avatar,n.uid).then(t=>{(0,g.ck)(n,{displayName:e.name,photoURL:t}).then(()=>{let e={...p.R,name:n.displayName,email:n.email,emailVerified:n.emailVerified,image:n.photoURL,id:n.uid};(0,x.Ti)(e)})}),{message:"Success",status:200}):((0,g.ck)(n,{displayName:e.name}).then(()=>{let e={...p.R,name:n.displayName,email:n.email,emailVerified:n.emailVerified,image:n.photoURL,id:n.uid};(0,x.Ti)(e)}),{message:"Success",status:200})}).catch(e=>({message:e.code,status:400}));var N=n(23640),w=()=>{let[e,t]=(0,a.useState)("LOGIN"),[n,c]=(0,a.useState)(),g=(0,o.useRouter)(),[h,p]=(0,a.useState)(!1),x=(0,a.useCallback)(()=>{"LOGIN"===e?t("REGISTER"):t("LOGIN")},[e]),{register:y,handleSubmit:w,watch:I,formState:{errors:S}}=(0,i.cI)({defaultValues:{name:"",email:"",password:"",bio:"",avatar:""}});return(0,a.useEffect)(()=>{let e=(0,b.YT)();e&&g.replace(N.Z.home)},[g,h]),(0,s.jsx)(a.Fragment,{children:(0,s.jsxs)("div",{className:"h-screen items-center justify-center flex",children:[(0,s.jsxs)("div",{className:"   bg-white   px-4   py-8   sm:rounded-lg   sm:px-10   w-[500px]   h-[500px]   ",children:[(0,s.jsxs)("form",{id:"auth",name:"auth",className:"space-y-6",onSubmit:w(t=>{if(p(!0),"REGISTER"===e){let e={...t,avatar:n};j(e).then(e=>{(null==e?void 0:e.status)===400&&l.ZP.error(e.message)}).catch(()=>{l.ZP.error("Something went wrong!")}).finally(()=>{p(!1)})}"LOGIN"===e&&v({email:t.email,password:t.password}).then(e=>{(null==e?void 0:e.status)===400&&l.ZP.error(e.message)}).catch(()=>{l.ZP.error("Something went wrong!")}).finally(()=>{p(!1)})}),children:[(0,s.jsxs)(f.ZT,{variant:"h1",children:["Chat ","REGISTER"===e?"Register":"Login"]}),"REGISTER"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"mt-1 flex items-center",children:n?(0,s.jsx)("label",{htmlFor:"myImage",children:(0,s.jsx)("img",{className:"w-16 h-16 rounded-full object-cover",alt:"not found",src:URL.createObjectURL(n)})}):(0,s.jsx)("span",{className:"inline-block h-16 w-16 rounded-full overflow-hidden bg-gray-100 p-1",children:(0,s.jsx)("svg",{className:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 14c2.21 0 4-1.79 4-4 0-2.21-1.79-4-4-4-2.21 0-4 1.79-4 4 0 2.21 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1h16v-1c0-2.66-5.33-4-8-4z"})})})}),n?(0,s.jsx)("div",{onClick:()=>c(void 0),className:"cursor-pointer border-[1px] border-red-300   px-4 py-2 rounded-full font-semibold text-red-400",children:"Remove"}):(0,s.jsx)("label",{htmlFor:"myImage",className:"cursor-pointer font-semibold   border-[1px] px-5 py-2 rounded-full hover:bg-gray-300 bg-gray-200",children:"Upload"})]}),(0,s.jsx)(u,{label:"name",id:"name",type:"name",register:y,disabled:h,errors:S})]}),(0,s.jsx)(u,{label:"email",id:"email",type:"email",register:y,disabled:h,errors:S}),(0,s.jsx)(u,{label:"password",id:"password",type:"password",register:y,disabled:h,errors:S}),(0,s.jsx)("div",{children:(0,s.jsx)(d.C,{disabled:h,fullWidth:!0,type:"submit",children:"LOGIN"===e?"Sign in":"Register"})})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute    inset-0    flex    items-center   ",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"bg-white px-2 text-gray-500",children:"Or continue with"})})]}),(0,s.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,s.jsx)(m,{icon:r.rFR,onClick:()=>{}}),(0,s.jsx)(m,{icon:r.VyK,onClick:()=>{}})]})]}),(0,s.jsxs)("div",{className:"   flex    gap-2    justify-center    text-sm    mt-6    px-2    text-gray-500   ",children:[(0,s.jsx)("div",{children:"LOGIN"===e?"New to Messenger?":"Already have an account?"}),(0,s.jsx)("div",{onClick:x,className:"underline cursor-pointer",children:"LOGIN"===e?"Create an account":"Login"})]})]}),(0,s.jsx)("input",{multiple:!0,className:"hidden",type:"file",name:"myImage",id:"myImage",onChange:e=>c(e.target.files[0])})]})})}},19260:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(9268);n(86006);var a=n(89791);t.C=e=>{let{type:t,fullWidth:n,children:i,onClick:r,secondary:l,danger:o,disabled:c}=e;return(0,s.jsx)("button",{onClick:r,type:t,disabled:c,className:(0,a.Z)("\n    flex justify-center\n    rounded-md\n    px-3\n    py-2\n    text-md\n    font-semibold\n    focus-visible:outline\n    focus-visible:outline-2\n    focus-visible:outline-offset-2\n    bg-blue-500\n    ",c&&"opacity-50 cursor-default",n&&"w-full",l?"text-gray-900":"text-white",o&&"bg-rose-500 hover:bg-rose-600 focus-visible:outline-rose-600",!l&&!o&&"bg-sky-500 hover:bg-sky-600 focus-visible:outline-sky-600"),children:i})};let i=e=>{let{type:t,fullWidth:n,children:a,onClick:i,secondary:r,danger:l,disabled:o,label:c,css:u}=e;return(0,s.jsx)("button",{onClick:i,type:t,disabled:o,className:" ".concat(u,"\n    p-1 px-2 text-base\n   opacity-90 font-semibold\n   ").concat(n&&"w-full","\n    ").concat(l?"bg-gray-300 hover:bg-gray-300 text-gray-900 focus-visible:outline-gray-600":"bg-blue-500 hover:bg-blue-600 text-white","\n   rounded-md"),children:c})}},84234:function(e,t,n){"use strict";n.d(t,{D0:function(){return a},FS:function(){return i},YT:function(){return s}});let s=()=>{{let e=localStorage.getItem("skyinc-auth");return e?JSON.parse(e):null}},a=e=>{localStorage.setItem("skyinc-auth",JSON.stringify(e))},i=()=>{localStorage.removeItem("skyinc-auth")}},5109:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});let s={id:"",name:"",email:"",emailVerified:!1,image:"",createDate:new Date,updateDate:new Date,FriendRequest:[],activeUser:!1,bio:"",Conversations:[]}},23640:function(e,t){"use strict";t.Z={home:"/",auth:"/auth",inbox:"/inbox"}},16160:function(e,t,n){"use strict";n.d(t,{Lv:function(){return i},Q1:function(){return l},Ti:function(){return r}});var s=n(6936),a=n(33134);let i=async e=>{try{let t=await (0,s.QT)((0,s.JU)(a.db,"users",e));return t.exists()?t.data():null}catch(e){return console.log("Error getting document:",e),null}},r=async e=>{let t=new Date().toISOString(),n={id:e.id,name:e.name,email:e.email,emailVerified:!1,image:e.image,lastTimeOnline:t,activeUser:!0,bio:"",createDate:t,updateDate:t,FriendRequest:[],Conversations:[]};try{await (0,s.pl)((0,s.JU)(a.db,"users",e.id),n)}catch(e){console.log(e)}},l=async(e,t)=>{try{await (0,s.r7)((0,s.JU)(a.db,"users",e),{activeUser:t,lastTimeOnline:new Date().toISOString()})}catch(e){console.log(e)}}},33134:function(e,t,n){"use strict";n.d(t,{db:function(){return o},lX:function(){return c},tO:function(){return u}});var s=n(1313),a=n(24734),i=n(6936),r=n(64202);let l=(0,s.ZF)({apiKey:"AIzaSyBcVSdMQGFxgaBIiJwvfmL5EIbEnUb0tJo",authDomain:"next-js-chat-app-33c2b.firebaseapp.com",projectId:"next-js-chat-app-33c2b",storageBucket:"next-js-chat-app-33c2b.appspot.com",messagingSenderId:"269077837950",appId:"1:269077837950:web:aa04484eb3107351d2c02f"}),o=(0,i.ad)(l),c=(0,a.v0)(l),u=(0,r.cF)(l);(0,a.v0)(l)},6823:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var s=n(64202),a=n(33134);let i=async(e,t)=>{let n=new Promise((n,i)=>{let r=(0,s.iH)(a.tO,"UserFiles/".concat(t,"/").concat(e.name)),l=(0,s.B0)(r,e);l.on("state_changed",e=>{e.bytesTransferred,e.totalBytes},e=>{console.log(e)},()=>{(0,s.Jt)(l.snapshot.ref).then(e=>{n(e)})})});return n}}},function(e){e.O(0,[662,271,679,680,190,386,253,698,744],function(){return e(e.s=94872)}),_N_E=e.O()}]);